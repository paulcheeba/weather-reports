{"name":"WR Jungle Weather Reports Generator","type":"script","author":"Rvy5E942LzI7U7KL","img":"modules/weather-reports/img/weather-reports-logo.webp","scope":"global","command":"const myContent = `\n    <style>\n    .my-class {\n      color: Green\n    }\n  </style>\n\n  <div class=\"my-class\">\n    Choose the Jungle Season you wish to roll a weather report for.\n  </div>\n`;\n\nnew Dialog({\n  title: \"Jungle Weather Report Generator\",\n  content: myContent,\n  buttons: {\n    spring: {\n      label: \"Jungle Spring Weather\",\n      callback: () => {ui.notifications.info(\"Jungle Spring Weather rolled!\"), game.macros.getName('WR Jungle Spring Weather').execute();},\n      icon: `<i class=\"fa-solid fa-sun-cloud\"></i>`\n    },\n    summer: {\n      label: \"Jungle Summer Weather\",\n      callback: () => {ui.notifications.info(\"Jungle Summer Weather rolled!\"), game.macros.getName('WR Jungle Summer Weather').execute();},\n      icon: `<i class=\"fa-solid fa-sun-bright\"></i>`\n    },\n    fall: {\n      label: \"Jungle Fall Weather\",\n      callback: () => {ui.notifications.info(\"Jungle Fall Weather rolled!\"), game.macros.getName('WR Jungle Fall Weather').execute();},\n      icon: `<i class=\"fa-solid fa-wind\"></i>`\n    },\n    winter: {\n      label: \"Jungle Winter Weather\",\n      callback: () => {ui.notifications.info(\"Jungle Winter Weather rolled!\"), game.macros.getName('WR Jungle Winter Weather').execute();},\n      icon: `<i class=\"fa-solid fa-snowflake\"></i>`\n    },\n}\n}).render(true);","flags":{"core":{"sourceId":"Macro.2d0IW9yCkiJDMpSh"},"cf":{"id":"temp_4bens8al0fi"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1666643730285,"modifiedTime":1666648892112,"lastModifiedBy":"Rvy5E942LzI7U7KL"},"_id":"2d0IW9yCkiJDMpSh","folder":null,"sort":0,"ownership":{"default":0,"Rvy5E942LzI7U7KL":3}}
{"name":"WR Spring Weather","type":"script","author":"Rvy5E942LzI7U7KL","img":"icons/svg/dice-target.svg","scope":"global","command":"const rollTablePack = game.packs.get(\"weather-reports.weather-rolltables\");\nrollTablePack.getIndex();\n\nrollTableID = rollTablePack.index.find(t => t.name === 'Spring Weather')._id;\n\nrollTablePack.getDocument(rollTableID).then(table => table.draw());","flags":{"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Compendium.world.weathermacros.LRbTPQniOPEQi9kZ"},"cf":{"id":"temp_ivr9ljuuob8"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1665968942454,"modifiedTime":1666648935004,"lastModifiedBy":"Rvy5E942LzI7U7KL"},"_id":"3gQUP8r1JOplz0hX","folder":null,"sort":0,"ownership":{"default":0,"Rvy5E942LzI7U7KL":3}}
{"name":"WR Jungle Winter Weather","type":"script","author":"Rvy5E942LzI7U7KL","img":"icons/svg/dice-target.svg","scope":"global","command":"const rollTablePack = game.packs.get(\"weather-reports.weather-rolltables\");\nrollTablePack.getIndex();\n\nrollTableID = rollTablePack.index.find(t => t.name === 'Jungle Winter')._id;\n\nrollTablePack.getDocument(rollTableID).then(table => table.draw());","flags":{"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Compendium.world.weathermacros.VSwhJ8EdMOhL2h1e"},"cf":{"id":"temp_4bens8al0fi"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1665968942454,"modifiedTime":1666648890879,"lastModifiedBy":"Rvy5E942LzI7U7KL"},"_id":"Cdy1LrhuJJfgpifU","folder":null,"sort":0,"ownership":{"default":0,"Rvy5E942LzI7U7KL":3}}
{"name":"#[CF_tempEntity]","type":"chat","command":"","flags":{"cf":{"id":"temp_4bens8al0fi","name":"Jungle Weather","color":"#000000","fontColor":"#FFFFFF","icon":"","sorting":"m","contents":["WtfAEzqLS8mVBfNP","hd968yhC5mMMLIpr","Cdy1LrhuJJfgpifU","2d0IW9yCkiJDMpSh","eNgtj66PDEbwUYmR"],"children":[]}},"author":"Rvy5E942LzI7U7KL","img":"icons/svg/dice-target.svg","scope":"global","folder":null,"sort":0,"ownership":{"default":0,"Rvy5E942LzI7U7KL":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1666648884269,"modifiedTime":1666648893398,"lastModifiedBy":"Rvy5E942LzI7U7KL"},"_id":"GoL9FnCM91xqCgml"}
{"name":"#[CF_tempEntity]","type":"chat","command":"","flags":{"cf":{"id":"temp_ivr9ljuuob8","name":"Spicy Homebrew","color":"#000000","fontColor":"#FFFFFF","icon":"","sorting":"m","contents":["sa4eHjPMs7mQ2Nd9","sMPGk2mTRVMoM32L","OTegUa4nJ76azYgA","3gQUP8r1JOplz0hX","TfedGVQ9cQk2kgzq","Xq1lzW97W6e7LFrn"],"children":[]}},"author":"Rvy5E942LzI7U7KL","img":"icons/svg/dice-target.svg","scope":"global","folder":null,"sort":0,"ownership":{"default":0,"Rvy5E942LzI7U7KL":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1666648924570,"modifiedTime":1666648939544,"lastModifiedBy":"Rvy5E942LzI7U7KL"},"_id":"LVMkapKSizNgGuqY"}
{"name":"WR Summer Weather","type":"script","author":"Rvy5E942LzI7U7KL","img":"icons/svg/dice-target.svg","scope":"global","command":"const rollTablePack = game.packs.get(\"weather-reports.weather-rolltables\");\nrollTablePack.getIndex();\n\nrollTableID = rollTablePack.index.find(t => t.name === 'Summer Weather')._id;\n\nrollTablePack.getDocument(rollTableID).then(table => table.draw());","flags":{"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Compendium.world.weathermacros.zLCiHzYiLZU6ekTB"},"cf":{"id":"temp_ivr9ljuuob8"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1665968942454,"modifiedTime":1666648932793,"lastModifiedBy":"Rvy5E942LzI7U7KL"},"_id":"OTegUa4nJ76azYgA","folder":null,"sort":0,"ownership":{"default":0,"Rvy5E942LzI7U7KL":3}}
{"name":"WR Spicy Homebrew Weather Report Generator","type":"script","author":"Rvy5E942LzI7U7KL","img":"modules/weather-reports/img/weather-reports-logo.webp","scope":"global","command":"const myContent = `\n    <style>\n    .my-class {\n      color: Dark Grey\n    }\n  </style>\n\n  <div class=\"my-class\">\n    Choose the Seasonal Weather or Wild Surge effect you wish to roll.\n  </div>\n`;\n\nnew Dialog({\n  title: \"Spicy Homebrew Weather Report Generator\",\n  content: myContent,\n  buttons: {\n    spring: {\n      label: \"Spring Weather\",\n      callback: () => {ui.notifications.info(\"Spring Weather rolled!\"), game.macros.getName('WR Spring Weather').execute();},\n      icon: `<i class=\"fa-solid fa-sun-cloud\"></i>`\n    },\n    summer: {\n      label: \"Summer Weather\",\n      callback: () => {ui.notifications.info(\"Summer Weather rolled!\"), game.macros.getName('WR Summer Weather').execute();},\n      icon: `<i class=\"fa-solid fa-sun-bright\"></i>`\n    },\n    fall: {\n      label: \"Fall Weather\",\n      callback: () => {ui.notifications.info(\"Fall Weather rolled!\"), game.macros.getName('WR Fall Weather').execute();},\n      icon: `<i class=\"fa-solid fa-wind\"></i>`\n    },\n    winter: {\n      label: \"Winter Weather\",\n      callback: () => {ui.notifications.info(\"Winter Weather rolled!\"), game.macros.getName('WR Winter Weather').execute();},\n      icon: `<i class=\"fa-solid fa-snowflake\"></i>`\n    },\n    wild_magic_surge: {\n      label: \"Wild Magic Surge\",\n      callback: () => {ui.notifications.info(\"Wild Magic Surge rolled!\"), game.macros.getName('WR Wild Magic Surge').execute();},\n      icon: `<i class=\"fa-solid fa-eclipse\"></i>`\n    },\n}\n}).render(true);","flags":{"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Macro.DblCmpZ0Q8ZHMnJR"},"cf":{"id":"temp_ivr9ljuuob8"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1665966118539,"modifiedTime":1666648937599,"lastModifiedBy":"Rvy5E942LzI7U7KL"},"_id":"TfedGVQ9cQk2kgzq","folder":null,"sort":0,"ownership":{"default":0,"Rvy5E942LzI7U7KL":3}}
{"name":"WR Jungle Fall Weather","type":"script","author":"Rvy5E942LzI7U7KL","img":"icons/svg/dice-target.svg","scope":"global","command":"const rollTablePack = game.packs.get(\"weather-reports.weather-rolltables\");\nrollTablePack.getIndex();\n\nrollTableID = rollTablePack.index.find(t => t.name === 'Jungle Fall')._id;\n\nrollTablePack.getDocument(rollTableID).then(table => table.draw());","flags":{"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Compendium.world.weathermacros.4irwol6yXq0j2VI7"},"cf":{"id":"temp_4bens8al0fi"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1665968942454,"modifiedTime":1666648887567,"lastModifiedBy":"Rvy5E942LzI7U7KL"},"_id":"WtfAEzqLS8mVBfNP","folder":null,"sort":0,"ownership":{"default":0,"Rvy5E942LzI7U7KL":3}}
{"name":"WR Fall Weather","type":"script","author":"Rvy5E942LzI7U7KL","img":"icons/svg/dice-target.svg","scope":"global","command":"const rollTablePack = game.packs.get(\"weather-reports.weather-rolltables\");\nrollTablePack.getIndex();\n\nrollTableID = rollTablePack.index.find(t => t.name === 'Fall Weather')._id;\n\nrollTablePack.getDocument(rollTableID).then(table => table.draw());","flags":{"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Compendium.world.weathermacros.4irwol6yXq0j2VI7"},"cf":{"id":"temp_ivr9ljuuob8"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1665968942454,"modifiedTime":1666648939545,"lastModifiedBy":"Rvy5E942LzI7U7KL"},"_id":"Xq1lzW97W6e7LFrn","folder":null,"sort":0,"ownership":{"default":0,"Rvy5E942LzI7U7KL":3}}
{"name":"WR Jungle Summer Weather","type":"script","author":"Rvy5E942LzI7U7KL","img":"icons/svg/dice-target.svg","scope":"global","command":"const rollTablePack = game.packs.get(\"weather-reports.weather-rolltables\");\nrollTablePack.getIndex();\n\nrollTableID = rollTablePack.index.find(t => t.name === 'Jungle Summer')._id;\n\nrollTablePack.getDocument(rollTableID).then(table => table.draw());","flags":{"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Compendium.world.weathermacros.zLCiHzYiLZU6ekTB"},"cf":{"id":"temp_4bens8al0fi"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1665968942454,"modifiedTime":1666648893398,"lastModifiedBy":"Rvy5E942LzI7U7KL"},"_id":"eNgtj66PDEbwUYmR","folder":null,"sort":0,"ownership":{"default":0,"Rvy5E942LzI7U7KL":3}}
{"name":"WR Jungle Spring Weather","type":"script","author":"Rvy5E942LzI7U7KL","img":"icons/svg/dice-target.svg","scope":"global","command":"const rollTablePack = game.packs.get(\"weather-reports.weather-rolltables\");\nrollTablePack.getIndex();\n\nrollTableID = rollTablePack.index.find(t => t.name === 'Jungle Spring')._id;\n\nrollTablePack.getDocument(rollTableID).then(table => table.draw());","flags":{"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Compendium.world.weathermacros.LRbTPQniOPEQi9kZ"},"cf":{"id":"temp_4bens8al0fi"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1665968942454,"modifiedTime":1666648889472,"lastModifiedBy":"Rvy5E942LzI7U7KL"},"_id":"hd968yhC5mMMLIpr","folder":null,"sort":0,"ownership":{"default":0,"Rvy5E942LzI7U7KL":3}}
{"name":"#[CF_tempEntity]","type":"chat","command":"","flags":{"cf":{"id":"temp_zewdi50imfj","name":"Regional Generator","color":"#000000","fontColor":"#FFFFFF","icon":"","sorting":"m","contents":["spfYmiYk7rzhEn4P"],"children":[]}},"author":"Rvy5E942LzI7U7KL","img":"icons/svg/dice-target.svg","scope":"global","folder":null,"sort":0,"ownership":{"default":0,"Rvy5E942LzI7U7KL":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1666648826719,"modifiedTime":1666648840784,"lastModifiedBy":"Rvy5E942LzI7U7KL"},"_id":"iFn8qKYSz6DqBmWB"}
{"name":"WR Wild Magic Surge","type":"script","author":"Rvy5E942LzI7U7KL","img":"icons/svg/dice-target.svg","scope":"global","command":"const rollTablePack = game.packs.get(\"weather-reports.weather-rolltables\");\nrollTablePack.getIndex();\n\nrollTableID = rollTablePack.index.find(t => t.name === 'Wild Magic Surge')._id;\n\nrollTablePack.getDocument(rollTableID).then(table => table.draw());","flags":{"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Macro.4irwol6yXq0j2VI7"},"cf":{"id":"temp_ivr9ljuuob8"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1665968942454,"modifiedTime":1666648930687,"lastModifiedBy":"Rvy5E942LzI7U7KL"},"_id":"sMPGk2mTRVMoM32L","folder":null,"sort":0,"ownership":{"default":0,"Rvy5E942LzI7U7KL":3}}
{"name":"WR Winter Weather","type":"script","author":"Rvy5E942LzI7U7KL","img":"icons/svg/dice-target.svg","scope":"global","command":"const rollTablePack = game.packs.get(\"weather-reports.weather-rolltables\");\nrollTablePack.getIndex();\n\nrollTableID = rollTablePack.index.find(t => t.name === 'Winter Weather')._id;\n\nrollTablePack.getDocument(rollTableID).then(table => table.draw());","flags":{"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Compendium.world.weathermacros.VSwhJ8EdMOhL2h1e"},"cf":{"id":"temp_ivr9ljuuob8"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1665968942454,"modifiedTime":1666648928838,"lastModifiedBy":"Rvy5E942LzI7U7KL"},"_id":"sa4eHjPMs7mQ2Nd9","folder":null,"sort":0,"ownership":{"default":0,"Rvy5E942LzI7U7KL":3}}
{"name":"WR Regional Weather Reports Generator","type":"script","author":"Rvy5E942LzI7U7KL","img":"modules/weather-reports/img/weather-reports-logo.webp","scope":"global","command":"const myContent = `\n    <style>\n    .my-class {\n      color: Red\n    }\n  </style>\n\n  <div class=\"my-class\">\n    Choose the Region you wish to roll a Weather Report for.\n  </div>\n`;\n\nnew Dialog({\n  title: \"Weather Report Generator\",\n  content: myContent,\n  buttons: {\n    spring: {\n      label: \"Jungle Weather\",\n      callback: () => {ui.notifications.info(\"Jungle Weather chosen!\"), game.macros.getName('WR Jungle Weather Reports Generator').execute();},\n      icon: `<i class=\"fa-solid fa-sun-cloud\"></i>`\n    },\n    summer: {\n      label: \"Spicy Homebrew Weather\",\n      callback: () => {ui.notifications.info(\"Spicy Homebrew Weather Chosen!\"), game.macros.getName('WR Spicy Homebrew Weather Report Generator').execute();},\n      icon: `<i class=\"fa-solid fa-sun-bright\"></i>`\n    },\n}\n}).render(true);","flags":{"core":{"sourceId":"Macro.spfYmiYk7rzhEn4P"},"cf":{"id":"temp_zewdi50imfj"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1666647695792,"modifiedTime":1666648830032,"lastModifiedBy":"Rvy5E942LzI7U7KL"},"_id":"spfYmiYk7rzhEn4P","folder":null,"sort":0,"ownership":{"default":0,"Rvy5E942LzI7U7KL":3}}
{"name":"Send Generic WR to SC v2 WORKING!!!!","type":"script","author":"Rvy5E942LzI7U7KL","img":"icons/svg/dice-target.svg","scope":"global","command":"const table1 = await fromUuid(\"Compendium.weather-reports.weather-rolltables.vmH1QVqHfzzxqp0E\"); //Generic WR RT\nconst {results: results1} = await table1.roll();\nconst weathercondition = results1[0].getChatText();\nconst fxmaster = results1[1].getChatText();\nvar additional = \"\";\nif(results1[2]) additional = '<br> <b>Additional Weather Effect: </b>\"' + results1[2].getChatText() + '\"';\n\nconst table2 = await fromUuid(\"Compendium.weather-reports.weather-rolltables.dRhherRR6Vf1LHI5\"); //Temps and Duration RT\nconst {results: results2} = await table2.roll();\nconst temps = results2[0].getChatText();\nconst durdesc = results2[1].getChatText();\nconst duration = Number(results2[1].getChatText().match(/\\d{1,3}/gm)[0]);\n\nconst body = weathercondition + '<br>' + fxmaster + '<br> ' + durdesc + additional;\nconst startDate = SimpleCalendar.api.timestampToDate(SimpleCalendar.api.timestamp());\nconst endDate = SimpleCalendar.api.timestampToDate(SimpleCalendar.api.timestamp() + duration * 60 * 60);\nawait SimpleCalendar.api.addNote('Weather Report', body, startDate, endDate);\n\nconst tableWeatherCondition = weathercondition;\nconst tableFXMasterEffect = fxmaster;\nconst tableTemp = temps;\nconst tableDuration = durdesc;\n\nlet messageTable = \"<b><h2>WEATHER REPORT:</h2></b><p>\" + \"<b>Weather Condition: </b>\" + tableWeatherCondition + \"<p>\" + \"<b>FXMaster Effect: </b>\" + tableFXMasterEffect + \"<p>\" + \"<b>Tempurature: </b>\" + tableTemp + \"<p>\" + \"<b>Weather Duration: </b>\" + tableDuration + \"<br>\" + additional\n\nlet chatData = {\n    user: game.user._id,\n    speaker: ChatMessage.getSpeaker(),\n    content: messageTable,\n    //whisper: game.users.entities.filter(u => u.isGM).map(u => u._id)\n};\nChatMessage.create(chatData, {});\n\n\nawait ChatMessage.create({content: duration});","ownership":{"default":0,"Rvy5E942LzI7U7KL":3},"flags":{"core":{"sourceId":"Macro.H58j6ubIQgnb8kUQ"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1676156261861,"modifiedTime":1678000323851,"lastModifiedBy":"Rvy5E942LzI7U7KL"},"folder":null,"sort":0,"_id":"tJiB5wl2eESuUWz3"}
{"name":"Send Generic WR to SC v2 WORKING!!!!","type":"script","author":"Rvy5E942LzI7U7KL","img":"icons/svg/dice-target.svg","scope":"global","command":"const table1 = await fromUuid(\"Compendium.weather-reports.weather-rolltables.vmH1QVqHfzzxqp0E\"); //Generic WR RT\nconst {results: results1} = await table1.roll();\nconst weathercondition = results1[0].getChatText();\nconst fxmaster = results1[1].getChatText();\nvar additional = \"\";\nif(results1[2]) additional = '<br> <b>Additional Weather Effect: </b>\"' + results1[2].getChatText() + '\"';\n\nconst table2 = await fromUuid(\"Compendium.weather-reports.weather-rolltables.dRhherRR6Vf1LHI5\"); //Temps and Duration RT\nconst {results: results2} = await table2.roll();\nconst temps = results2[0].getChatText();\nconst durdesc = results2[1].getChatText();\nconst duration = Number(results2[1].getChatText().match(/\\d{1,3}/gm)[0]);\n\nconst body = weathercondition + '<br>' + fxmaster + '<br> ' + durdesc + additional;\nconst startDate = SimpleCalendar.api.timestampToDate(SimpleCalendar.api.timestamp());\nconst endDate = SimpleCalendar.api.timestampToDate(SimpleCalendar.api.timestamp() + duration * 60 * 60);\nawait SimpleCalendar.api.addNote('Weather Report', body, startDate, endDate);\n\nconst tableWeatherCondition = weathercondition;\nconst tableFXMasterEffect = fxmaster;\nconst tableTemp = temps;\nconst tableDuration = durdesc;\n\nlet messageTable = \"<b><h2>WEATHER REPORT:</h2></b><p>\" + \"<b>Weather Condition: </b>\" + tableWeatherCondition + \"<p>\" + \"<b>FXMaster Effect: </b>\" + tableFXMasterEffect + \"<p>\" + \"<b>Tempurature: </b>\" + tableTemp + \"<p>\" + \"<b>Weather Duration: </b>\" + tableDuration + \"<br>\" + additional\n\nlet chatData = {\n    user: game.user._id,\n    speaker: ChatMessage.getSpeaker(),\n    content: messageTable,\n    //whisper: game.users.entities.filter(u => u.isGM).map(u => u._id)\n};\nChatMessage.create(chatData, {});\n\n\nawait ChatMessage.create({content: duration});","ownership":{"default":0,"Rvy5E942LzI7U7KL":3},"flags":{"core":{"sourceId":"Macro.H58j6ubIQgnb8kUQ"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1676156261861,"modifiedTime":1678003583412,"lastModifiedBy":"Rvy5E942LzI7U7KL"},"folder":null,"sort":0,"_id":"tJiB5wl2eESuUWz3"}
